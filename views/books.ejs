<%- include('partials/header') %>
    <div class="page-header">
        <h1>All Books</h1>
        <% if (typeof searchQuery !== 'undefined') { %>
            <p>Search results for: "<%= searchQuery %>"</p>
        <% } %>
        <a href="/books/add" class="btn btn-primary">Add New Book</a>
    </div>

    <div class="books-grid">
        <% if (books.length > 0) { %>
            <% books.forEach(book => { %>
                <div class="book-card">
                    <img src="<%= book.imageUrl %>" alt="<%= book.title %>" class="book-image">
                    <div class="book-info">
                        <h3 class="book-title"><%= book.title %></h3>
                        <p class="book-author">By <%= book.author %></p>
                        <p class="book-category"><%= book.category %></p>
                        <p class="book-price">$<%= book.price.toFixed(2) %></p>
                        <p class="book-stock">In stock: <%= book.stock %></p>
                        <div class="book-actions">
                            <a href="/books/edit/<%= book._id %>" class="btn btn-edit">Edit</a>
                            <form action="/books/<%= book._id %>?_method=DELETE" method="POST" class="delete-form">
                                <button type="submit" class="btn btn-delete" onclick="return confirm('Are you sure?')">Delete</button>
                            </form>
                        </div>
                    </div>
                </div>
            <% }); %>
        <% } else { %>
            <div class="no-books">
                <h3>No books found</h3>
                <p><a href="/books/add">Add the first book</a></p>
            </div>
        <% } %>
    </div>
<%- include('partials/footer') %>